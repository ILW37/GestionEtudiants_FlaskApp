#!/bin/bash
set -e

echo "?????????????????????????????????????????????????"
echo "?   ?? Syst?me de Gestion de Dipl?mes NFT      ?"
echo "?????????????????????????????????????????????????"
echo ""
echo "?? V?rification des variables d'environnement..."

# Fonction de v?rification
check_var() {
    if [ -z "${!1}" ]; then
        echo "? ERREUR: Variable $1 non d?finie"
        exit 1
    else
        echo "? $1 d?finie"
    fi
}

# V?rifier les variables critiques
check_var "PINATA_JWT"
check_var "CONTRACT_ADDRESS"
check_var "OWNER_PRIVATE_KEY"
check_var "RPC_URL"
check_var "CHAIN_ID"
check_var "SECRET_KEY"

echo ""
echo "?? Configuration actuelle:"
echo "  ?? Contrat: $CONTRACT_ADDRESS"
echo "  ?? RPC: $RPC_URL"
echo "  ??  Chain ID: $CHAIN_ID"
echo "  ?? Flask Secret: ..."
echo ""
echo "?? D?marrage de l'application Flask..."
echo ""

# Ex?cuter la commande
exec "$@"